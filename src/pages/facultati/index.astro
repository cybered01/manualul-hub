---
import Layout from '../../layouts/Layout.astro';
import { readFileSync } from 'fs';
import { parse } from 'csv-parse/sync';

const fileContent = readFileSync('./src/data/facultati.csv', 'utf-8');
const facultati = parse(fileContent, { columns: true, skip_empty_lines: true, trim: true });
---

<Layout 
    title="Facultate Profit 2026 - Analiza ROI a Studiilor"
    description="Compară facultățile din România după salariul de debut și timpul de recuperare a investiției. Alege-ți cariera bazat pe cifre reale."
>
    <main class="max-w-5xl mx-auto px-4 pb-20">
        <header class="py-16 text-center">
            <div class="inline-block px-3 py-1 bg-indigo-100 text-indigo-700 rounded-full text-xs font-bold uppercase tracking-widest mb-4">
                Educație & Investiție
            </div>
            <h1 class="text-4xl md:text-6xl font-black text-gray-900 mb-6 tracking-tight">
                Facultate <span class="text-indigo-600">Profit</span>
            </h1>
            <p class="text-xl text-gray-600 max-w-2xl mx-auto">
                Cât te costă studiile și în cât timp îți recuperezi banii? Analizăm taxele, chiria și salariile de debut pentru 2026.
            </p>
        </header>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
            {facultati.map((item) => (
                <a href={`/facultati/${item.id}`} class="group">
                    <div class="bg-white rounded-[32px] border border-gray-100 shadow-sm hover:shadow-2xl hover:-translate-y-1 transition-all duration-300 overflow-hidden">
                        <div class="p-8">
                            <div class="flex justify-between items-start mb-6">
                                <div class="bg-indigo-50 text-indigo-700 p-3 rounded-2xl">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                        <path d="M12 14l9-5-9-5-9 5 9 5z" />
                                        <path d="M12 14l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14z" />
                                    </svg>
                                </div>
                                <span class={`text-[10px] font-bold px-3 py-1 rounded-full border ${item.status === 'Căutat' ? 'bg-green-50 text-green-700 border-green-100' : 'bg-indigo-50 text-indigo-700 border-indigo-100'}`}>
                                    {item.status}
                                </span>
                            </div>

                            <h2 class="text-2xl font-black text-gray-900 mb-1 group-hover:text-indigo-600 transition-colors">
                                {item.specializare}
                            </h2>
                            <p class="text-gray-400 font-medium text-sm mb-6">{item.universitate}</p>

                            <div class="grid grid-cols-2 gap-4 py-4 border-t border-gray-50">
                                <div>
                                    <p class="text-[10px] text-gray-400 font-black uppercase tracking-widest">Salariu Debutant</p>
                                    <p class="text-lg font-bold text-gray-900">{item.salariu_debutant_net} Lei</p>
                                </div>
                                <div>
                                    <p class="text-[10px] text-gray-400 font-black uppercase tracking-widest">Durată Studii</p>
                                    <p class="text-lg font-bold text-gray-900">{item.durata_ani} Ani</p>
                                </div>
                            </div>
                        </div>
                        
                        <div class="px-8 py-4 bg-indigo-600 text-white text-center font-bold text-sm">
                            Vezi Simulatorul ROI →
                        </div>
                    </div>
                </a>
            ))}
        </div>
    </main>
</Layout>